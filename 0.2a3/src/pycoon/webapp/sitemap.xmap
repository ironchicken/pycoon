<?xml version="1.0" encoding="utf-8"?>
<map:sitemap xmlns:map="http://apache.org/cocoon/sitemap/1.0" xmlns:py="http://pycoon.org/ns/pysitemap/0.1/">
  <map:components>
    <map:matchers default="wildcard">
      <map:matcher name="wildcard" logger="sitemap.matcher.wildcard" src="org.apache.cocoon.matching.WildcardURIMatcher" py:src="pycoon.components.cocoon.WildcardUriMatcher"/>
    </map:matchers>
    <map:generators default="file">
      <map:generator name="file" logger="sitemap.generator.file" src="org.apache.cocoon.generation.FileGenerator" py:src="pycoon.components.cocoon.FileGenerator"/>
      <map:generator name="exception" logger="sitemap.generator.exception"  src="org.apache.cocoon.generation.ExceptionGenerator" py:src="pycoon.components.cocoon.ExceptionGenerator"/>
    </map:generators>
    <map:readers default="resource">
      <map:reader name="resource" logger="sitemap.reader.resource" src="org.apache.cocoon.reading.ResourceReader" py:src="pycoon.components.cocoon.ResourceReader"/>
    </map:readers>
    <map:transformers default="xslt">
	  <map:transformer name="xslt" logger="sitemap.transformer.xslt" src="org.apache.cocoon.transformation.TraxTransformer" py:src="pycoon.components.cocoon.TraxTransformer"/>
    </map:transformers>
    <map:selectors default="browser">
      <map:selector name="exception" src="org.apache.cocoon.selection.ExceptionSelector" py:src="pycoon.components.cocoon.ExceptionSelector">
        <exception name="not-found" class="org.apache.cocoon.ResourceNotFoundException" py:class="ResourceNotFoundException"/>
        <exception name="connection-refused" class="java.net.ConnectException" py:class="URLError"/>
        <exception class="java.lang.Throwable" unroll="true"/>
      </map:selector>
      <map:selector name="request-parameter" logger="sitemap.selector.request-parameter" src="org.apache.cocoon.selection.RequestParameterSelector" py:src="pycoon.components.cocoon.RequestParameterSelector"/>
      <map:selector name="request-method" logger="sitemap.selector.request-method" src="org.apache.cocoon.selection.RequestMethodSelector" py:src="pycoon.components.cocoon.RequestMethodSelector"/>
    </map:selectors>
    <map:serializers default="xml">
      <map:serializer name="xml" mime-type="application/xml; charset=utf-8" logger="sitemap.serializer.xml" src="org.apache.cocoon.serialization.XMLSerializer" py:src="pycoon.components.cocoon.XmlSerializer">
         <encoding>utf-8</encoding>
      </map:serializer>
    </map:serializers>
    <map:pipes default="noncaching">
      <map:pipe name="noncaching" src="org.apache.cocoon.components.pipeline.impl.NonCachingProcessingPipeline" py:src="pycoon.components.cocoon.Pipeline"/>
    </map:pipes>
  </map:components>

  <map:pipelines>
    <map:pipeline>
      <map:match pattern="">
        <map:generate src="welcome.html"/>
        <map:serialize/>
      </map:match>
    </map:pipeline>
    <map:pipeline>
      <map:match pattern="debug">
        <map:generate src="http://foo.bar/nonexistent"/>
        <map:serialize/>
      </map:match>
    </map:pipeline>
    <map:handle-errors>
      <map:generate type="exception"/>
      <map:select type="exception">
        <map:when test="not-found">
          <map:transform src="stylesheets/exception2html.xslt">
            <map:parameter name="page-title" value="Resource Not Found"/>
          </map:transform>
          <map:serialize status-code="404"/>
        </map:when>
        <map:otherwise>
          <map:transform src="stylesheets/exception2html.xslt"/>
          <map:serialize status-code="500"/>
        </map:otherwise>
      </map:select>
    </map:handle-errors>
  </map:pipelines>
</map:sitemap>

